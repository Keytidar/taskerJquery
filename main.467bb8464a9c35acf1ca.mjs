(()=>{"use strict";var t,e,a,o,r,s={835:(t,e,a)=>{a.d(e,{Cd:()=>s,Wm:()=>r,s5:()=>o});const o={checkBg:()=>{$("#tasks-ul").length>0?$("#tasks-ul").addClass("bg-logo"):$("#tasks-ul").removeClass("bg-logo")},errorInput:t=>{const e=t.attr("type"),a=t.data("origPlaceholder");"date"!==e&&"time"!==e&&(t.val(""),t.addClass("bg-danger"),t.attr("placeholder",a?"Wrong ".concat(a.toLowerCase()):""),setTimeout(()=>{t.removeClass("bg-danger text-white"),t.attr("placeholder",a)},4e3))},resetInputs:()=>{$("input").val(""),$("textarea").val(""),$("#task-date-input").val((new Date).toISOString().slice(0,10)),$("#task-time-input").val((new Date).toTimeString().slice(0,5)),$("#task-color").val("#000000")},saveTaskLocal:t=>{localStorage.setItem("taskStorage",JSON.stringify(t))},createId:t=>(t?t+"-":"")+Date.now().toString(36)+"-"+Math.random().toString(36).slice(2,8),changeDone:t=>{t.toggleClass("done")},displayTask:t=>{const e=t.isDone?"checked":"",a=t.isDone?"opacity-50":"",r='\n            <li id="'.concat(t._id,'" class="').concat(a,'" style="background-color:').concat(s.hexToRgba(t.color,.4),'">\n            <div class="d-flex align-items-center gap-3" >\n            <h1>').concat(t.header,'</h1>\n            <h5 class="mb-0 text-truncate">').concat(t.data,'</h5>\n            <div class="ms-auto align-text-center d-flex align-items-center gap-3">\n              <span>').concat(t.date,"  ").concat(t.time,'</span>\n                <input type="checkbox" class="btn-check" id="').concat("checkbox-"+t._id,'" autocomplete="off" ').concat(e,'>\n                <label class="btn btn-outline-primary done-button" for="').concat("checkbox-"+t._id,'">✔︎</label>\n              <button type="button" class="btn btn-dark rmv-button">🗑️</button>\n            </div>\n        </div>\n          </li>');$("#tasks-ul").append(r),o.resetInputs()},displayStorageData:t=>{if(Array.isArray(t)&&t.length>0)try{t.forEach(t=>{o.displayTask(t)})}catch(t){console.error("Storage reading error, clearing storage"),console.error(t)}},toggleDone(t){t.isDone=!t.isDone},getStorageDataFetch:async t=>{try{const e=await fetch("http://localhost:2077/tasks");if(!e.ok)throw new Error("Server response error: ".concat(e.status));(await e.json()).forEach(e=>{t.push(e)})}catch(t){console.error("Failed to load tasks:".concat(t))}}},r={preloaderHide:()=>{$(window).on("load",()=>{$("#preloader").addClass("d-none"),console.warn("window loading done")})}},s={createId:t=>(t?t+"-":"")+Date.now().toString(36)+"-"+Math.random().toString(36).slice(2,8),hexToRgba:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t&&/^#([A-Fa-f0-9]{6})$/.test(t)||(console.warn('Invalid HEX color format: "'.concat(t,'", fallback to #000000')),t="#000000");const a=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return"rgba(".concat(a,", ").concat(o,", ").concat(r,", ").concat(e,")")},consoleSuccess(t){console.log("%c".concat(t),"color: green; font-weight: bold;")}}},900:(t,e,a)=>{a.a(t,async(t,e)=>{try{var o=a(835);o.Wm.preloaderHide(),o.s5.resetInputs();const t=[];await o.s5.getStorageDataFetch(t),console.log(t),t.length>0&&t.forEach(t=>{o.s5.displayTask(t)}),console.log(t);class r{constructor(t,e,a,o,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.header=t,this.data=e,this.date=a,this.time=o,this.color=r,this.isDone=s,this.createdAt=(new Date).toLocaleString()}}$("#invisible-container").on("click",async e=>{const a=$(e.target.closest("li")),r=a.attr("id"),s=t.findIndex(t=>t._id===r),n=t.find(t=>t._id===r);if(e.target.showPicker)return e.target.showPicker();if($(e.target).hasClass("rmv-button")){if(!r)return console.error("Task id is missing");try{!0===(await fetch("http://localhost:2077/tasks/".concat(r),{method:"DELETE"})).ok&&(a.remove(),t.splice(s,1),o.Cd.consoleSuccess("Task successfully removed!"))}catch(t){console.error("Couldnt remove task:",t)}}else if($(e.target).hasClass("done-button")){$(e.target).closest("li").toggleClass("opacity-50"),o.s5.toggleDone(n),o.s5.saveTaskLocal(t);try{await fetch("http://localhost:2077/tasks/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDone:n.isDone})})}catch(t){console.error("An error occured: ",t)}}else $(e.target).is("h1, h5")&&($("#titleModal").text(n.header),$("#textModal").text(n.data),new bootstrap.Modal(document.getElementById("myModal")).show())}),$("#task-submit").on("submit",async t=>{t.preventDefault();const e=$("#task-heading").val().trim(),a=$("#task-info").val().trim(),s=$("#task-date-input").val(),n=$("#task-time-input").val(),c=new Date("".concat(s,"T").concat(n)),l=new Date,i=$("#task-color").val();let d=0;if(e.length<=3&&(o.s5.errorInput($("#task-heading")),d++,console.log(d)),a.length<=3&&(o.s5.errorInput($("#task-info")),d++),c<=l&&(o.s5.errorInput($("#task-date-input")),o.s5.errorInput($("#task-time-input"))),d)return;const h=new r(e,a,s,n,i,!1);try{const t=await fetch("http://localhost:2077/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),e=await t.json();o.s5.displayTask(e)}catch(t){console.error("Couldnt proceed task API:",t)}}),e()}catch(t){e(t)}},1)}},n={};function c(t){var e=n[t];if(void 0!==e)return e.exports;var a=n[t]={exports:{}};return s[t](a,a.exports,c),a.exports}t="function"==typeof Symbol,e=t?Symbol("webpack queues"):"__webpack_queues__",a=t?Symbol("webpack exports"):"__webpack_exports__",o=t?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},c.a=(t,s,n)=>{var c;n&&((c=[]).d=-1);var l,i,d,h=new Set,p=t.exports,g=new Promise((t,e)=>{d=e,i=t});g[a]=p,g[e]=t=>(c&&t(c),h.forEach(t),g.catch(t=>{})),t.exports=g,s(t=>{var s;l=(t=>t.map(t=>{if(null!==t&&"object"==typeof t){if(t[e])return t;if(t.then){var s=[];s.d=0,t.then(t=>{n[a]=t,r(s)},t=>{n[o]=t,r(s)});var n={};return n[e]=t=>t(s),n}}var c={};return c[e]=t=>{},c[a]=t,c}))(t);var n=()=>l.map(t=>{if(t[o])throw t[o];return t[a]}),i=new Promise(t=>{(s=()=>t(n)).r=0;var a=t=>t!==c&&!h.has(t)&&(h.add(t),t&&!t.d&&(s.r++,t.push(s)));l.map(t=>t[e](a))});return s.r?i:n()},t=>(t?d(g[o]=t):i(p),r(c))),c&&c.d<0&&(c.d=0)},c.d=(t,e)=>{for(var a in e)c.o(e,a)&&!c.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c(900)})();